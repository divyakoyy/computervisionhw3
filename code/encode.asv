function C = encode(I, code)
%UNTITLED3 Summary of this function goes here
%   Detailed explanation goes here
dim = size(I);

if numel(dim) < 3
    index3 = 1
else
    index3 = 
end

arraySize = [dim(1)*dim(2), index3];
Ic = double(reshape(I, arraySize));
C = (code.U)'*(Ic - code.mu*ones(1,dim(3)));
end

